<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SkyEye 智能监控系统 - 智能报警规则管理 v2.0</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --sidebar-width: 250px;
            --topbar-height: 60px;
            --primary-color: #1e3c72;
            --secondary-color: #2a5298;
            --success-color: #28a745;
            --warning-color: #ffc107;
            --danger-color: #dc3545;
            --info-color: #17a2b8;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow-x: hidden;
            background-color: #f8f9fc;
        }
        
        .sidebar {
            width: var(--sidebar-width);
            background: linear-gradient(180deg, var(--primary-color), var(--secondary-color));
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            z-index: 1000;
            transition: all 0.3s;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
            color: white;
        }
        
        .main-content {
            margin-left: var(--sidebar-width);
            padding: 20px;
            min-height: 100vh;
            transition: all 0.3s;
        }
        
        .topbar {
            height: var(--topbar-height);
            background-color: white;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
            display: flex;
            align-items: center;
            padding: 0 20px;
            position: fixed;
            top: 0;
            right: 0;
            left: var(--sidebar-width);
            z-index: 999;
            transition: all 0.3s;
        }
        
        .content-area {
            margin-top: calc(var(--topbar-height) + 20px);
            padding-bottom: 20px;
        }
        
        .logo {
            padding: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 20px;
            font-weight: bold;
            height: var(--topbar-height);
            display: flex;
            align-items: center;
        }
        
        .menu-item {
            padding: 15px 20px;
            display: flex;
            align-items: center;
            color: rgba(255, 255, 255, 0.9);
            text-decoration: none;
            transition: all 0.3s;
            border-left: 4px solid transparent;
        }
        
        .menu-item:hover, .menu-item.active {
            background-color: rgba(255, 255, 255, 0.1);
            color: white;
            border-left: 4px solid white;
        }
        
        .menu-item i {
            margin-right: 10px;
            width: 20px;
            text-align: center;
        }
        
        .card {
            border: none;
            border-radius: 12px;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
            margin-bottom: 20px;
            transition: all 0.3s;
        }
        
        .card:hover {
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.12);
        }
        
        .card-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-bottom: none;
            padding: 20px;
            font-weight: 600;
            border-radius: 12px 12px 0 0;
        }
        
        .smart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 12px;
            color: white;
        }
        
        .smart-header h4 {
            margin: 0;
            color: white;
        }
        
        .smart-header .breadcrumb {
            margin: 0;
            background: transparent;
        }
        
        .smart-header .breadcrumb-item a {
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
        }
        
        .smart-header .breadcrumb-item.active {
            color: white;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
            transition: all 0.3s;
        }
        
        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.12);
        }
        
        .stat-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            font-size: 20px;
            color: white;
        }
        
        .stat-number {
            font-size: 24px;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 5px;
        }
        
        .stat-label {
            color: #6c757d;
            font-size: 14px;
        }
        
        .performance-indicator {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 10px;
        }
        
        .performance-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: 5px;
        }
        
        .performance-excellent {
            background: var(--success-color);
        }
        
        .performance-good {
            background: var(--info-color);
        }
        
        .performance-warning {
            background: var(--warning-color);
        }
        
        .performance-poor {
            background: var(--danger-color);
        }
        
        .rule-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            border-left: 4px solid var(--primary-color);
            transition: all 0.3s;
            position: relative;
        }
        
        .rule-card:hover {
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.12);
            transform: translateY(-2px);
        }
        
        .rule-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .rule-title {
            font-weight: 600;
            font-size: 16px;
            color: #2c3e50;
        }
        
        .rule-status {
            display: flex;
            align-items: center;
        }
        
        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .status-active {
            background: var(--success-color);
            animation: pulse 2s infinite;
        }
        
        .status-inactive {
            background: #6c757d;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(40, 167, 69, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(40, 167, 69, 0); }
            100% { box-shadow: 0 0 0 0 rgba(40, 167, 69, 0); }
        }
        
        .rule-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .meta-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .badge-priority-high {
            background: rgba(220, 53, 69, 0.1);
            color: var(--danger-color);
            border: 1px solid rgba(220, 53, 69, 0.3);
        }
        
        .badge-priority-medium {
            background: rgba(255, 193, 7, 0.1);
            color: var(--warning-color);
            border: 1px solid rgba(255, 193, 7, 0.3);
        }
        
        .badge-priority-low {
            background: rgba(40, 167, 69, 0.1);
            color: var(--success-color);
            border: 1px solid rgba(40, 167, 69, 0.3);
        }
        
        .badge-type {
            background: rgba(23, 162, 184, 0.1);
            color: var(--info-color);
            border: 1px solid rgba(23, 162, 184, 0.3);
        }
        
        .rule-description {
            color: #6c757d;
            font-size: 14px;
            line-height: 1.5;
            margin-bottom: 15px;
        }
        
        .rule-targets {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 15px;
            font-size: 13px;
        }
        
        .rule-actions {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }
        
        .btn-smart {
            border-radius: 20px;
            padding: 6px 16px;
            font-size: 13px;
            font-weight: 500;
            transition: all 0.3s;
        }
        
        .btn-smart:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }
        
        .floating-action {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s;
            z-index: 1000;
        }
        
        .floating-action:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 25px rgba(0, 0, 0, 0.3);
        }
        
        .search-box {
            width: 300px;
        }
        
        .search-box .form-control {
            border-radius: 25px;
            border: 1px solid #dee2e6;
            padding-left: 40px;
        }
        
        .search-box .btn {
            border-radius: 25px;
            margin-left: -40px;
            z-index: 10;
            background: transparent;
            border: none;
            color: #6c757d;
        }
        
        .monitoring-type-tabs {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
        }
        
        .type-tab {
            display: inline-block;
            padding: 12px 24px;
            margin-right: 10px;
            margin-bottom: 10px;
            background: #f8f9fa;
            border: 2px solid transparent;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }
        
        .type-tab.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        .type-tab:hover {
            background: var(--secondary-color);
            color: white;
        }
        
        .type-tab i {
            margin-right: 8px;
        }
        
        .ai-suggestion {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            color: white;
        }
        
        .ai-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 15px;
        }
        
        .suggestion-item {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            border-left: 4px solid rgba(255, 255, 255, 0.3);
        }
        
        .suggestion-title {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .suggestion-description {
            font-size: 13px;
            opacity: 0.9;
        }
        
        .smart-filter {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
        }
        
        .filter-section {
            margin-bottom: 20px;
        }
        
        .filter-title {
            font-weight: 600;
            margin-bottom: 10px;
            color: #2c3e50;
        }
        
        .filter-chips {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .filter-chip {
            padding: 6px 12px;
            background: #e9ecef;
            border: 1px solid #dee2e6;
            border-radius: 20px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .filter-chip.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        .filter-chip:hover {
            background: var(--secondary-color);
            color: white;
        }
        
        .rule-template {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            color: white;
        }
        
        .template-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }
        
        .template-item {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .template-item:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }
        
        .template-title {
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .template-description {
            font-size: 13px;
            opacity: 0.9;
        }
        
        .modal-content {
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .modal-header {
            border-radius: 15px 15px 0 0;
            border-bottom: none;
        }
        
        .modal-footer {
            border-radius: 0 0 15px 15px;
            border-top: 1px solid #dee2e6;
        }
        
        @media (max-width: 768px) {
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .type-tab {
                display: block;
                margin-bottom: 10px;
            }
            
            .rule-actions {
                flex-wrap: wrap;
            }
            
            .rule-actions .btn-smart {
                margin-bottom: 5px;
            }
            
            .floating-action {
                width: 50px;
                height: 50px;
                font-size: 20px;
            }
        }
        
        @media (max-width: 576px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .smart-header {
                flex-direction: column;
                text-align: center;
            }
            
            .smart-header .breadcrumb {
                margin-top: 10px;
            }
            
            .rule-card {
                padding: 15px;
            }
            
            .rule-actions .btn-smart {
                font-size: 11px;
                padding: 4px 8px;
            }
        }
    </style>
</head>
<body>
    <!-- 侧边导航栏 -->
    <div class="sidebar">
        <div class="logo">
            <i class="fas fa-shield-alt me-2"></i> SkyEye 智能监控
        </div>
        <div class="menu-items mt-4">
            <a href="dashboard.html" class="menu-item">
                <i class="fas fa-tachometer-alt"></i> 智能控制台
            </a>
            <a href="monitoring.html" class="menu-item">
                <i class="fas fa-video"></i> 实时监控
            </a>
            <a href="alerts.html" class="menu-item">
                <i class="fas fa-bell"></i> 报警中心
            </a>
            <a href="analytics.html" class="menu-item">
                <i class="fas fa-chart-line"></i> 智能分析
            </a>
            <a href="devices.html" class="menu-item">
                <i class="fas fa-server"></i> 设备管理
            </a>
            <a href="business.html" class="menu-item">
                <i class="fas fa-briefcase"></i> 业务监控
            </a>
            <a href="users.html" class="menu-item">
                <i class="fas fa-user-shield"></i> 用户管理
            </a>
            <a href="history.html" class="menu-item">
                <i class="fas fa-history"></i> 历史记录
            </a>
            <a href="settings.html" class="menu-item active">
                <i class="fas fa-sliders-h"></i> 系统设置
            </a>
        </div>
    </div>

    <!-- 顶部导航栏 -->
    <div class="topbar">
        <button type="button" class="btn btn-sm d-md-none" id="sidebarCollapse">
            <i class="fas fa-bars"></i>
        </button>
        
        <div class="d-flex align-items-center ms-auto">
            <div class="input-group search-box">
                <input type="text" class="form-control" placeholder="搜索报警规则、设备、业务...">
                <button class="btn" type="button">
                    <i class="fas fa-search"></i>
                </button>
            </div>
            
            <button type="button" class="btn btn-sm position-relative ms-2">
                <i class="far fa-bell"></i>
                <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                    12
                </span>
            </button>
            
            <div class="dropdown ms-3">
                <a class="dropdown-toggle d-flex align-items-center text-decoration-none" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    <div class="rounded-circle bg-light d-flex align-items-center justify-content-center" style="width: 32px; height: 32px;">
                        <i class="fas fa-user text-secondary"></i>
                    </div>
                    <div class="ms-2 d-none d-sm-block">
                        <div class="small fw-bold">系统管理员</div>
                        <div class="small text-muted">超级管理员</div>
                    </div>
                </a>
                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                    <li><a class="dropdown-item" href="#"><i class="fas fa-user-circle me-2"></i> 个人信息</a></li>
                    <li><a class="dropdown-item" href="#"><i class="fas fa-cog me-2"></i> 账号设置</a></li>
                    <li><hr class="dropdown-divider"></li>
                    <li><a class="dropdown-item" href="#"><i class="fas fa-sign-out-alt me-2"></i> 退出登录</a></li>
                </ul>
            </div>
        </div>
    </div>

    <!-- 主内容区 -->
    <div class="main-content">
        <div class="content-area">
            <!-- 智能化页面头部 -->
            <div class="smart-header">
                <div>
                    <h4><i class="fas fa-brain me-2"></i> 智能报警规则管理</h4>
                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb mb-0">
                            <li class="breadcrumb-item"><a href="settings.html">系统设置</a></li>
                            <li class="breadcrumb-item active" aria-current="page">智能报警规则</li>
                        </ol>
                    </nav>
                </div>
                <div>
                    <div class="btn-group me-2" role="group">
                        <button class="btn btn-light btn-sm" onclick="showAIRecommendations()">
                            <i class="fas fa-magic me-1"></i> AI 智能推荐
                        </button>
                        <button class="btn btn-outline-light btn-sm" onclick="showSystemStatus()">
                            <i class="fas fa-heartbeat me-1"></i> 系统状态
                        </button>
                    </div>
                    <div class="btn-group me-2" role="group">
                        <button class="btn btn-outline-light btn-sm" onclick="batchOperations()">
                            <i class="fas fa-tasks me-1"></i> 批量操作
                        </button>
                        <button class="btn btn-outline-light btn-sm" onclick="importRules()">
                            <i class="fas fa-file-import me-1"></i> 导入
                        </button>
                        <button class="btn btn-outline-light btn-sm" onclick="exportRules()">
                            <i class="fas fa-file-export me-1"></i> 导出
                        </button>
                    </div>
                    <button class="btn btn-warning btn-sm" onclick="createNewRule()">
                        <i class="fas fa-plus me-1"></i> 创建规则
                    </button>
                </div>
            </div>
            
            <!-- 统计概览 -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon" style="background: var(--success-color);">
                        <i class="fas fa-shield-check"></i>
                    </div>
                    <div class="stat-number">156</div>
                    <div class="stat-label">活跃规则</div>
                    <div class="performance-indicator">
                        <div class="performance-dot performance-excellent"></div>
                        <span style="font-size: 12px; color: #6c757d;">运行良好</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon" style="background: var(--warning-color);">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <div class="stat-number">23</div>
                    <div class="stat-label">今日触发</div>
                    <div class="performance-indicator">
                        <div class="performance-dot performance-warning"></div>
                        <span style="font-size: 12px; color: #6c757d;">需要关注</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon" style="background: var(--info-color);">
                        <i class="fas fa-robot"></i>
                    </div>
                    <div class="stat-number">8</div>
                    <div class="stat-label">AI 推荐</div>
                    <div class="performance-indicator">
                        <div class="performance-dot performance-good"></div>
                        <span style="font-size: 12px; color: #6c757d;">智能优化</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon" style="background: var(--danger-color);">
                        <i class="fas fa-times-circle"></i>
                    </div>
                    <div class="stat-number">3</div>
                    <div class="stat-label">异常规则</div>
                    <div class="performance-indicator">
                        <div class="performance-dot performance-poor"></div>
                        <span style="font-size: 12px; color: #6c757d;">需要修复</span>
                    </div>
                </div>
            </div>
            
            <!-- 监控类型选择 -->
            <div class="monitoring-type-tabs">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h5 class="mb-0"><i class="fas fa-layer-group me-2"></i> 监控类型</h5>
                    <small class="text-muted">选择要管理的监控类型</small>
                </div>
                <div class="type-tabs">
                    <div class="type-tab active" data-type="all">
                        <i class="fas fa-globe"></i> 全部监控
                    </div>
                    <div class="type-tab" data-type="infrastructure">
                        <i class="fas fa-server"></i> 基础设施
                    </div>
                    <div class="type-tab" data-type="network">
                        <i class="fas fa-network-wired"></i> 网络设备
                    </div>
                    <div class="type-tab" data-type="application">
                        <i class="fas fa-code"></i> 应用服务
                    </div>
                    <div class="type-tab" data-type="middleware">
                        <i class="fas fa-cubes"></i> 中间件
                    </div>
                    <div class="type-tab" data-type="database">
                        <i class="fas fa-database"></i> 数据库
                    </div>
                    <div class="type-tab" data-type="business">
                        <i class="fas fa-briefcase"></i> 业务监控
                    </div>
                    <div class="type-tab" data-type="security">
                        <i class="fas fa-shield-alt"></i> 安全监控
                    </div>
                </div>
            </div>
            
            <!-- AI 智能推荐 -->
            <div class="ai-suggestion">
                <div class="ai-icon">
                    <i class="fas fa-brain"></i>
                </div>
                <h5><i class="fas fa-magic me-2"></i> AI 智能推荐</h5>
                <p class="mb-3">基于系统学习和历史数据分析，为您推荐优化的报警规则</p>
                <div class="row">
                    <div class="col-md-6">
                        <div class="suggestion-item">
                            <div class="suggestion-title">数据库连接池优化</div>
                            <div class="suggestion-description">检测到数据库连接池使用率持续偏高，建议添加连接池监控规则</div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="suggestion-item">
                            <div class="suggestion-title">业务响应时间异常</div>
                            <div class="suggestion-description">用户登录接口响应时间波动较大，建议设置响应时间监控</div>
                        </div>
                    </div>
                </div>
                <button class="btn btn-light btn-sm mt-3" onclick="showAIRecommendations()">
                    <i class="fas fa-plus me-1"></i> 应用推荐规则
                </button>
            </div>
            
            <div class="row">
                <div class="col-md-3">
                    <!-- 智能筛选器 -->
                    <div class="smart-filter">
                        <h6><i class="fas fa-filter me-2"></i> 智能筛选</h6>
                        
                        <div class="filter-section">
                            <div class="filter-title">规则状态</div>
                            <div class="filter-chips">
                                <div class="filter-chip active" data-filter="all">全部</div>
                                <div class="filter-chip" data-filter="active">运行中</div>
                                <div class="filter-chip" data-filter="paused">已暂停</div>
                                <div class="filter-chip" data-filter="error">异常</div>
                            </div>
                        </div>
                        
                        <div class="filter-section">
                            <div class="filter-title">优先级</div>
                            <div class="filter-chips">
                                <div class="filter-chip" data-priority="high">高优先级</div>
                                <div class="filter-chip" data-priority="medium">中优先级</div>
                                <div class="filter-chip" data-priority="low">低优先级</div>
                            </div>
                        </div>
                        
                        <div class="filter-section">
                            <div class="filter-title">触发频率</div>
                            <div class="filter-chips">
                                <div class="filter-chip" data-frequency="high">频繁触发</div>
                                <div class="filter-chip" data-frequency="normal">正常</div>
                                <div class="filter-chip" data-frequency="low">很少触发</div>
                            </div>
                        </div>
                        
                        <div class="filter-section">
                            <div class="filter-title">创建时间</div>
                            <div class="filter-chips">
                                <div class="filter-chip" data-time="today">今天</div>
                                <div class="filter-chip" data-time="week">本周</div>
                                <div class="filter-chip" data-time="month">本月</div>
                            </div>
                        </div>
                        
                        <button class="btn btn-primary btn-sm w-100 mt-3" onclick="applyFilters()">
                            <i class="fas fa-search me-1"></i> 应用筛选
                        </button>
                        <button class="btn btn-outline-secondary btn-sm w-100 mt-2" onclick="resetFilters()">
                            <i class="fas fa-undo me-1"></i> 重置筛选
                        </button>
                    </div>
                    
                    <!-- 规则模板 -->
                    <div class="rule-template">
                        <h6><i class="fas fa-templates me-2"></i> 快速模板</h6>
                        <p class="mb-3">使用预设模板快速创建常用报警规则</p>
                        <div class="template-grid">
                            <div class="template-item" onclick="applyTemplate('服务器监控')">
                                <div class="template-title">服务器监控</div>
                                <div class="template-description">CPU、内存、磁盘使用率监控</div>
                            </div>
                            <div class="template-item" onclick="applyTemplate('数据库监控')">
                                <div class="template-title">数据库监控</div>
                                <div class="template-description">连接数、查询性能、锁等待</div>
                            </div>
                            <div class="template-item" onclick="applyTemplate('应用监控')">
                                <div class="template-title">应用监控</div>
                                <div class="template-description">响应时间、错误率、吞吐量</div>
                            </div>
                            <div class="template-item" onclick="applyTemplate('业务监控')">
                                <div class="template-title">业务监控</div>
                                <div class="template-description">订单量、用户活跃度、转化率</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-9">
                    <!-- 报警规则列表 -->
                    <div class="card">
                        <div class="card-header">
                            <div class="d-flex justify-content-between align-items-center">
                                <span><i class="fas fa-bell me-2"></i> 智能报警规则列表</span>
                                <div class="d-flex align-items-center">
                                    <div class="btn-group btn-group-sm me-2">
                                        <button class="btn btn-outline-secondary active">
                                            <i class="fas fa-list"></i>
                                        </button>
                                        <button class="btn btn-outline-secondary">
                                            <i class="fas fa-th"></i>
                                        </button>
                                    </div>
                                    <select class="form-select form-select-sm" style="width: 150px;">
                                        <option>按创建时间排序</option>
                                        <option>按触发次数排序</option>
                                        <option>按优先级排序</option>
                                        <option>按名称排序</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <!-- 规则项 1 - 基础设施监控 -->
                            <div class="rule-card" data-rule-id="rule1">
                                <div class="rule-header">
                                    <div class="rule-title">
                                        <i class="fas fa-server me-2" style="color: var(--primary-color);"></i>
                                        生产服务器资源监控
                                    </div>
                                    <div class="rule-status">
                                        <div class="status-indicator status-active"></div>
                                        <span class="text-success">运行中</span>
                                        <div class="form-check form-switch ms-3">
                                            <input class="form-check-input" type="checkbox" checked>
                                        </div>
                                    </div>
                                </div>
                                <div class="rule-meta">
                                    <span class="meta-badge badge-priority-high">高优先级</span>
                                    <span class="meta-badge badge-type">基础设施</span>
                                    <span class="meta-badge badge-type">CPU监控</span>
                                    <span class="meta-badge badge-type">内存监控</span>
                                </div>
                                <div class="rule-description">
                                    监控生产环境服务器的CPU使用率、内存使用率和磁盘空间。当CPU使用率超过80%或内存使用率超过85%时立即发送报警通知。
                                </div>
                                <div class="rule-targets">
                                    <i class="fas fa-crosshairs me-2"></i>
                                    <strong>监控目标:</strong> 生产服务器集群 (10台) | 
                                    <strong>最近触发:</strong> 2小时前 | 
                                    <strong>触发次数:</strong> 今日3次
                                </div>
                                <div class="rule-actions">
                                    <button class="btn btn-primary btn-smart btn-sm" onclick="editRule(this)">
                                        <i class="fas fa-edit me-1"></i> 编辑
                                    </button>
                                    <button class="btn btn-info btn-smart btn-sm" onclick="viewTrend(this)">
                                        <i class="fas fa-chart-line me-1"></i> 查看趋势
                                    </button>
                                    <button class="btn btn-success btn-smart btn-sm" onclick="cloneRule(this)">
                                        <i class="fas fa-copy me-1"></i> 克隆
                                    </button>
                                    <button class="btn btn-warning btn-smart btn-sm" onclick="toggleRule(this)">
                                        <i class="fas fa-pause me-1"></i> 暂停
                                    </button>
                                    <button class="btn btn-danger btn-smart btn-sm" onclick="deleteRule(this)">
                                        <i class="fas fa-trash me-1"></i> 删除
                                    </button>
                                </div>
                            </div>
                            
                            <!-- 规则项 2 - 数据库监控 -->
                            <div class="rule-card" data-rule-id="rule2">
                                <div class="rule-header">
                                    <div class="rule-title">
                                        <i class="fas fa-database me-2" style="color: var(--info-color);"></i>
                                        MySQL 数据库性能监控
                                    </div>
                                    <div class="rule-status">
                                        <div class="status-indicator status-active"></div>
                                        <span class="text-success">运行中</span>
                                        <div class="form-check form-switch ms-3">
                                            <input class="form-check-input" type="checkbox" checked>
                                        </div>
                                    </div>
                                </div>
                                <div class="rule-meta">
                                    <span class="meta-badge badge-priority-high">高优先级</span>
                                    <span class="meta-badge badge-type">数据库</span>
                                    <span class="meta-badge badge-type">MySQL</span>
                                    <span class="meta-badge badge-type">性能监控</span>
                                </div>
                                <div class="rule-description">
                                    监控MySQL数据库的连接数、查询响应时间、锁等待时间和慢查询数量。当连接数超过80%或出现长时间锁等待时触发报警。
                                </div>
                                <div class="rule-targets">
                                    <i class="fas fa-crosshairs me-2"></i>
                                    <strong>监控目标:</strong> MySQL主从集群 (3台) | 
                                    <strong>最近触发:</strong> 30分钟前 | 
                                    <strong>触发次数:</strong> 今日1次
                                </div>
                                <div class="rule-actions">
                                    <button class="btn btn-primary btn-smart btn-sm" onclick="editRule(this)">
                                        <i class="fas fa-edit me-1"></i> 编辑
                                    </button>
                                    <button class="btn btn-info btn-smart btn-sm" onclick="viewTrend(this)">
                                        <i class="fas fa-chart-line me-1"></i> 查看趋势
                                    </button>
                                    <button class="btn btn-success btn-smart btn-sm" onclick="cloneRule(this)">
                                        <i class="fas fa-copy me-1"></i> 克隆
                                    </button>
                                    <button class="btn btn-warning btn-smart btn-sm" onclick="toggleRule(this)">
                                        <i class="fas fa-pause me-1"></i> 暂停
                                    </button>
                                    <button class="btn btn-danger btn-smart btn-sm" onclick="deleteRule(this)">
                                        <i class="fas fa-trash me-1"></i> 删除
                                    </button>
                                </div>
                            </div>
                            
                            <!-- 规则项 3 - 应用监控 -->
                            <div class="rule-card" data-rule-id="rule3">
                                <div class="rule-header">
                                    <div class="rule-title">
                                        <i class="fas fa-code me-2" style="color: var(--success-color);"></i>
                                        Web应用响应时间监控
                                    </div>
                                    <div class="rule-status">
                                        <div class="status-indicator status-active"></div>
                                        <span class="text-success">运行中</span>
                                        <div class="form-check form-switch ms-3">
                                            <input class="form-check-input" type="checkbox" checked>
                                        </div>
                                    </div>
                                </div>
                                <div class="rule-meta">
                                    <span class="meta-badge badge-priority-medium">中优先级</span>
                                    <span class="meta-badge badge-type">应用监控</span>
                                    <span class="meta-badge badge-type">响应时间</span>
                                    <span class="meta-badge badge-type">Web服务</span>
                                </div>
                                <div class="rule-description">
                                    监控Web应用的API响应时间、错误率和吞吐量。当API响应时间超过2秒或错误率超过5%时发送报警通知。
                                </div>
                                <div class="rule-targets">
                                    <i class="fas fa-crosshairs me-2"></i>
                                    <strong>监控目标:</strong> Web应用集群 (5个实例) | 
                                    <strong>最近触发:</strong> 1小时前 | 
                                    <strong>触发次数:</strong> 今日2次
                                </div>
                                <div class="rule-actions">
                                    <button class="btn btn-primary btn-smart btn-sm" onclick="editRule(this)">
                                        <i class="fas fa-edit me-1"></i> 编辑
                                    </button>
                                    <button class="btn btn-info btn-smart btn-sm" onclick="viewTrend(this)">
                                        <i class="fas fa-chart-line me-1"></i> 查看趋势
                                    </button>
                                    <button class="btn btn-success btn-smart btn-sm" onclick="cloneRule(this)">
                                        <i class="fas fa-copy me-1"></i> 克隆
                                    </button>
                                    <button class="btn btn-warning btn-smart btn-sm" onclick="toggleRule(this)">
                                        <i class="fas fa-pause me-1"></i> 暂停
                                    </button>
                                    <button class="btn btn-danger btn-smart btn-sm" onclick="deleteRule(this)">
                                        <i class="fas fa-trash me-1"></i> 删除
                                    </button>
                                </div>
                            </div>
                            
                            <!-- 规则项 4 - 业务监控 -->
                            <div class="rule-card" data-rule-id="rule4">
                                <div class="rule-header">
                                    <div class="rule-title">
                                        <i class="fas fa-briefcase me-2" style="color: var(--warning-color);"></i>
                                        订单处理业务监控
                                    </div>
                                    <div class="rule-status">
                                        <div class="status-indicator status-active"></div>
                                        <span class="text-success">运行中</span>
                                        <div class="form-check form-switch ms-3">
                                            <input class="form-check-input" type="checkbox" checked>
                                        </div>
                                    </div>
                                </div>
                                <div class="rule-meta">
                                    <span class="meta-badge badge-priority-high">高优先级</span>
                                    <span class="meta-badge badge-type">业务监控</span>
                                    <span class="meta-badge badge-type">订单处理</span>
                                    <span class="meta-badge badge-type">自定义脚本</span>
                                </div>
                                <div class="rule-description">
                                    通过自定义脚本监控订单处理业务的关键指标：订单创建成功率、支付成功率、发货及时率。当任一指标低于预设阈值时立即报警。
                                </div>
                                <div class="rule-targets">
                                    <i class="fas fa-crosshairs me-2"></i>
                                    <strong>监控目标:</strong> 订单处理流程 (自定义脚本) | 
                                    <strong>最近触发:</strong> 未触发 | 
                                    <strong>触发次数:</strong> 今日0次
                                </div>
                                <div class="rule-actions">
                                    <button class="btn btn-primary btn-smart btn-sm" onclick="editRule(this)">
                                        <i class="fas fa-edit me-1"></i> 编辑
                                    </button>
                                    <button class="btn btn-info btn-smart btn-sm" onclick="viewTrend(this)">
                                        <i class="fas fa-code me-1"></i> 查看脚本
                                    </button>
                                    <button class="btn btn-success btn-smart btn-sm" onclick="cloneRule(this)">
                                        <i class="fas fa-copy me-1"></i> 克隆
                                    </button>
                                    <button class="btn btn-warning btn-smart btn-sm" onclick="toggleRule(this)">
                                        <i class="fas fa-pause me-1"></i> 暂停
                                    </button>
                                    <button class="btn btn-danger btn-smart btn-sm" onclick="deleteRule(this)">
                                        <i class="fas fa-trash me-1"></i> 删除
                                    </button>
                                </div>
                            </div>
                            
                            <!-- 规则项 5 - 中间件监控 -->
                            <div class="rule-card" data-rule-id="rule5">
                                <div class="rule-header">
                                    <div class="rule-title">
                                        <i class="fas fa-cubes me-2" style="color: var(--danger-color);"></i>
                                        Redis 缓存集群监控
                                    </div>
                                    <div class="rule-status">
                                        <div class="status-indicator status-inactive"></div>
                                        <span class="text-warning">已暂停</span>
                                        <div class="form-check form-switch ms-3">
                                            <input class="form-check-input" type="checkbox">
                                        </div>
                                    </div>
                                </div>
                                <div class="rule-meta">
                                    <span class="meta-badge badge-priority-medium">中优先级</span>
                                    <span class="meta-badge badge-type">中间件</span>
                                    <span class="meta-badge badge-type">Redis</span>
                                    <span class="meta-badge badge-type">缓存监控</span>
                                </div>
                                <div class="rule-description">
                                    监控Redis缓存集群的内存使用率、命中率、连接数和主从同步状态。当内存使用率超过90%或命中率低于85%时发送报警。
                                </div>
                                <div class="rule-targets">
                                    <i class="fas fa-crosshairs me-2"></i>
                                    <strong>监控目标:</strong> Redis集群 (6个节点) | 
                                    <strong>最近触发:</strong> 昨天 | 
                                    <strong>触发次数:</strong> 今日0次
                                </div>
                                <div class="rule-actions">
                                    <button class="btn btn-primary btn-smart btn-sm" onclick="editRule(this)">
                                        <i class="fas fa-edit me-1"></i> 编辑
                                    </button>
                                    <button class="btn btn-info btn-smart btn-sm" onclick="viewTrend(this)">
                                        <i class="fas fa-chart-line me-1"></i> 查看趋势
                                    </button>
                                    <button class="btn btn-success btn-smart btn-sm" onclick="toggleRule(this)">
                                        <i class="fas fa-play me-1"></i> 启用
                                    </button>
                                    <button class="btn btn-success btn-smart btn-sm" onclick="cloneRule(this)">
                                        <i class="fas fa-copy me-1"></i> 克隆
                                    </button>
                                    <button class="btn btn-danger btn-smart btn-sm" onclick="deleteRule(this)">
                                        <i class="fas fa-trash me-1"></i> 删除
                                    </button>
                                </div>
                            </div>
                            
                            <!-- 分页 -->
                            <nav aria-label="报警规则分页" class="mt-4">
                                <ul class="pagination justify-content-center">
                                    <li class="page-item disabled">
                                        <a class="page-link" href="#" tabindex="-1">
                                            <i class="fas fa-chevron-left"></i>
                                        </a>
                                    </li>
                                    <li class="page-item active"><a class="page-link" href="#">1</a></li>
                                    <li class="page-item"><a class="page-link" href="#">2</a></li>
                                    <li class="page-item"><a class="page-link" href="#">3</a></li>
                                    <li class="page-item"><a class="page-link" href="#">4</a></li>
                                    <li class="page-item"><a class="page-link" href="#">5</a></li>
                                    <li class="page-item">
                                        <a class="page-link" href="#">
                                            <i class="fas fa-chevron-right"></i>
                                        </a>
                                    </li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 浮动创建按钮 -->
    <button class="floating-action" onclick="createNewRule()">
        <i class="fas fa-plus"></i>
    </button>

    <!-- 创建规则模态框 -->
    <div class="modal fade" id="createRuleModal" tabindex="-1" aria-labelledby="createRuleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title" id="createRuleModalLabel">
                        <i class="fas fa-plus me-2"></i>创建智能报警规则
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="createRuleForm">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="ruleName" class="form-label">规则名称 <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" id="ruleName" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="ruleType" class="form-label">监控类型 <span class="text-danger">*</span></label>
                                    <select class="form-select" id="ruleType" required>
                                        <option value="">请选择监控类型</option>
                                        <option value="infrastructure">基础设施</option>
                                        <option value="network">网络设备</option>
                                        <option value="application">应用服务</option>
                                        <option value="middleware">中间件</option>
                                        <option value="database">数据库</option>
                                        <option value="business">业务监控</option>
                                        <option value="security">安全监控</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="rulePriority" class="form-label">优先级 <span class="text-danger">*</span></label>
                                    <select class="form-select" id="rulePriority" required>
                                        <option value="">请选择优先级</option>
                                        <option value="high">高优先级</option>
                                        <option value="medium">中优先级</option>
                                        <option value="low">低优先级</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="ruleStatus" class="form-label">启用状态</label>
                                    <div class="form-check form-switch mt-2">
                                        <input class="form-check-input" type="checkbox" id="ruleStatus" checked>
                                        <label class="form-check-label" for="ruleStatus">启用规则</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="ruleDescription" class="form-label">规则描述</label>
                            <textarea class="form-control" id="ruleDescription" rows="3"></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="monitoringTargets" class="form-label">监控目标 <span class="text-danger">*</span></label>
                            <div class="input-group">
                                <input type="text" class="form-control" id="monitoringTargets" placeholder="输入监控目标，多个目标用逗号分隔" required>
                                <button class="btn btn-outline-secondary" type="button" onclick="selectTargets()">
                                    <i class="fas fa-search"></i> 选择
                                </button>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="metricType" class="form-label">监控指标 <span class="text-danger">*</span></label>
                                    <select class="form-select" id="metricType" required>
                                        <option value="">请选择监控指标</option>
                                        <option value="cpu">CPU使用率</option>
                                        <option value="memory">内存使用率</option>
                                        <option value="disk">磁盘使用率</option>
                                        <option value="network">网络流量</option>
                                        <option value="response_time">响应时间</option>
                                        <option value="error_rate">错误率</option>
                                        <option value="custom">自定义指标</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="thresholdValue" class="form-label">阈值 <span class="text-danger">*</span></label>
                                    <div class="input-group">
                                        <select class="form-select" id="thresholdOperator" style="max-width: 100px;">
                                            <option value=">">></option>
                                            <option value=">=">>=</option>
                                            <option value="<"><</option>
                                            <option value="<="><=</option>
                                            <option value="=">=</option>
                                            <option value="!=">!=</option>
                                        </select>
                                        <input type="number" class="form-control" id="thresholdValue" required>
                                        <span class="input-group-text">%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">通知方式</label>
                            <div class="row">
                                <div class="col-md-3">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="notifyEmail" checked>
                                        <label class="form-check-label" for="notifyEmail">邮件通知</label>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="notifySms">
                                        <label class="form-check-label" for="notifySms">短信通知</label>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="notifyWeChat">
                                        <label class="form-check-label" for="notifyWeChat">微信通知</label>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="notifyDingTalk">
                                        <label class="form-check-label" for="notifyDingTalk">钉钉通知</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="notificationContacts" class="form-label">通知联系人</label>
                            <input type="text" class="form-control" id="notificationContacts" placeholder="输入联系人邮箱或手机号，多个用逗号分隔">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                    <button type="button" class="btn btn-primary" onclick="saveRule()">
                        <i class="fas fa-save me-1"></i>保存规则
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- AI推荐应用模态框 -->
    <div class="modal fade" id="aiRecommendModal" tabindex="-1" aria-labelledby="aiRecommendModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                    <h5 class="modal-title" id="aiRecommendModalLabel">
                        <i class="fas fa-brain me-2"></i>AI 智能推荐规则
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="alert alert-info">
                        <i class="fas fa-info-circle me-2"></i>
                        基于您的系统运行数据和行业最佳实践，AI为您推荐以下优化规则
                    </div>
                    <div class="recommendation-list">
                        <div class="card mb-3">
                            <div class="card-body">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="recommend1" checked>
                                    <label class="form-check-label" for="recommend1">
                                        <h6>数据库连接池监控优化</h6>
                                        <p class="text-muted mb-2">检测到您的数据库连接池使用率经常超过75%，建议设置连接池监控规则</p>
                                        <small class="text-success">预计可减少30%的数据库性能问题</small>
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="card mb-3">
                            <div class="card-body">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="recommend2" checked>
                                    <label class="form-check-label" for="recommend2">
                                        <h6>API响应时间异常检测</h6>
                                        <p class="text-muted mb-2">用户登录接口响应时间波动较大，建议设置智能异常检测</p>
                                        <small class="text-success">预计可提升20%的用户体验</small>
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="card mb-3">
                            <div class="card-body">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="recommend3">
                                    <label class="form-check-label" for="recommend3">
                                        <h6>磁盘空间预警优化</h6>
                                        <p class="text-muted mb-2">基于历史增长趋势，建议将磁盘空间预警阈值调整为75%</p>
                                        <small class="text-success">预计可提前3天发现存储问题</small>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                    <button type="button" class="btn btn-primary" onclick="applyAIRecommendations()">
                        <i class="fas fa-magic me-1"></i>应用选中推荐
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 删除确认模态框 -->
    <div class="modal fade" id="deleteConfirmModal" tabindex="-1" aria-labelledby="deleteConfirmModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-danger text-white">
                    <h5 class="modal-title" id="deleteConfirmModalLabel">
                        <i class="fas fa-exclamation-triangle me-2"></i>确认删除
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="text-center">
                        <i class="fas fa-exclamation-triangle fa-4x text-danger mb-3"></i>
                        <h5>您确定要删除此报警规则吗？</h5>
                        <p class="text-muted">规则名称: <span id="deleteRuleName" class="fw-bold"></span></p>
                        <p class="text-danger">此操作不可恢复，请谨慎操作！</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                    <button type="button" class="btn btn-danger" onclick="confirmDelete()">
                        <i class="fas fa-trash me-1"></i>确认删除
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast 通知容器 -->
    <div class="toast-container position-fixed top-0 end-0 p-3" style="z-index: 11000;">
        <div id="successToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="toast-header bg-success text-white">
                <i class="fas fa-check-circle me-2"></i>
                <strong class="me-auto">操作成功</strong>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
            <div class="toast-body" id="successToastBody">
                操作已成功完成
            </div>
        </div>
        <div id="errorToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="toast-header bg-danger text-white">
                <i class="fas fa-exclamation-circle me-2"></i>
                <strong class="me-auto">操作失败</strong>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
            <div class="toast-body" id="errorToastBody">
                操作失败，请重试
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // 全局变量
        let currentDeleteRule = null;
        
        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', function() {
            initializeEventListeners();
            loadMockData();
        });
        
        // 初始化事件监听器
        function initializeEventListeners() {
            // 监控类型切换
            document.querySelectorAll('.type-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    document.querySelectorAll('.type-tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    const type = this.dataset.type;
                    console.log('切换到监控类型:', type);
                    filterRulesByType(type);
                });
            });
            
            // 筛选器
            document.querySelectorAll('.filter-chip').forEach(chip => {
                chip.addEventListener('click', function() {
                    const group = this.parentElement;
                    const isActive = this.classList.contains('active');
                    
                    // 如果点击的是"全部"，则取消其他选择
                    if (this.dataset.filter === 'all') {
                        group.querySelectorAll('.filter-chip').forEach(c => c.classList.remove('active'));
                        this.classList.add('active');
                    } else {
                        // 取消"全部"的选择
                        group.querySelector('[data-filter="all"]')?.classList.remove('active');
                        this.classList.toggle('active');
                    }
                    
                    console.log('筛选器更新');
                });
            });
            
            // 规则卡片悬停效果
            document.querySelectorAll('.rule-card').forEach(card => {
                card.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-2px)';
                });
                
                card.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0)';
                });
            });
            
            // 规则开关切换
            document.querySelectorAll('.form-check-input').forEach(toggle => {
                toggle.addEventListener('change', function() {
                    if (this.closest('.modal')) return; // 忽略模态框中的开关
                    
                    const ruleCard = this.closest('.rule-card');
                    const statusIndicator = ruleCard.querySelector('.status-indicator');
                    const statusText = ruleCard.querySelector('.rule-status span');
                    
                    if (this.checked) {
                        statusIndicator.classList.remove('status-inactive');
                        statusIndicator.classList.add('status-active');
                        statusText.textContent = '运行中';
                        statusText.className = 'text-success';
                        showToast('success', '规则已启用');
                    } else {
                        statusIndicator.classList.remove('status-active');
                        statusIndicator.classList.add('status-inactive');
                        statusText.textContent = '已暂停';
                        statusText.className = 'text-warning';
                        showToast('success', '规则已暂停');
                    }
                });
            });
            
            // 搜索功能
            document.querySelector('.search-box input').addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase();
                searchRules(searchTerm);
            });
        }
        
        // 加载模拟数据
        function loadMockData() {
            console.log('加载模拟数据完成');
        }
        
        // 创建新规则
        function createNewRule() {
            const modal = new bootstrap.Modal(document.getElementById('createRuleModal'));
            modal.show();
        }
        
        // 保存规则
        function saveRule() {
            const form = document.getElementById('createRuleForm');
            if (validateForm(form)) {
                // 模拟保存操作
                setTimeout(() => {
                    bootstrap.Modal.getInstance(document.getElementById('createRuleModal')).hide();
                    showToast('success', '规则创建成功！');
                    addNewRuleToPage();
                }, 1000);
            }
        }
        
        // 编辑规则
        function editRule(button) {
            const ruleCard = button.closest('.rule-card');
            const ruleTitle = ruleCard.querySelector('.rule-title').textContent.trim();
            
            showToast('success', `正在编辑规则: ${ruleTitle}`);
            // 这里可以打开编辑模态框
        }
        
        // 查看趋势
        function viewTrend(button) {
            const ruleCard = button.closest('.rule-card');
            const ruleTitle = ruleCard.querySelector('.rule-title').textContent.trim();
            
            showToast('success', `正在查看 ${ruleTitle} 的趋势分析`);
            // 这里可以打开趋势分析模态框
        }
        
        // 克隆规则
        function cloneRule(button) {
            const ruleCard = button.closest('.rule-card');
            const ruleTitle = ruleCard.querySelector('.rule-title').textContent.trim();
            
            setTimeout(() => {
                showToast('success', `规则 "${ruleTitle}" 已克隆成功！`);
            }, 500);
        }
        
        // 暂停/启用规则
        function toggleRule(button) {
            const ruleCard = button.closest('.rule-card');
            const toggle = ruleCard.querySelector('.form-check-input');
            
            toggle.click(); // 触发开关切换
        }
        
        // 删除规则
        function deleteRule(button) {
            const ruleCard = button.closest('.rule-card');
            const ruleTitle = ruleCard.querySelector('.rule-title').textContent.trim();
            
            currentDeleteRule = ruleCard;
            document.getElementById('deleteRuleName').textContent = ruleTitle;
            
            const modal = new bootstrap.Modal(document.getElementById('deleteConfirmModal'));
            modal.show();
        }
        
        // 确认删除
        function confirmDelete() {
            if (currentDeleteRule) {
                currentDeleteRule.style.transition = 'all 0.3s';
                currentDeleteRule.style.opacity = '0';
                currentDeleteRule.style.transform = 'translateX(-100%)';
                
                setTimeout(() => {
                    currentDeleteRule.remove();
                    bootstrap.Modal.getInstance(document.getElementById('deleteConfirmModal')).hide();
                    showToast('success', '规则已删除');
                    currentDeleteRule = null;
                }, 300);
            }
        }
        
        // 显示AI推荐
        function showAIRecommendations() {
            const modal = new bootstrap.Modal(document.getElementById('aiRecommendModal'));
            modal.show();
        }
        
        // 应用AI推荐
        function applyAIRecommendations() {
            const checkedRecommendations = document.querySelectorAll('#aiRecommendModal .form-check-input:checked');
            const count = checkedRecommendations.length;
            
            if (count === 0) {
                showToast('error', '请至少选择一个推荐规则');
                return;
            }
            
            // 模拟应用推荐
            setTimeout(() => {
                bootstrap.Modal.getInstance(document.getElementById('aiRecommendModal')).hide();
                showToast('success', `已应用 ${count} 个AI推荐规则`);
            }, 1000);
        }
        
        // 显示系统状态
        function showSystemStatus() {
            showToast('success', '系统状态：所有服务运行正常');
        }
        
        // 批量操作
        function batchOperations() {
            showToast('success', '批量操作功能正在开发中...');
        }
        
        // 导入规则
        function importRules() {
            showToast('success', '规则导入功能正在开发中...');
        }
        
        // 导出规则
        function exportRules() {
            showToast('success', '规则导出功能正在开发中...');
        }
        
        // 应用模板
        function applyTemplate(templateName) {
            const templateData = getTemplateData(templateName);
            
            if (templateData) {
                document.getElementById('ruleName').value = templateData.name;
                document.getElementById('ruleType').value = templateData.type;
                document.getElementById('rulePriority').value = templateData.priority;
                document.getElementById('ruleDescription').value = templateData.description;
                
                createNewRule();
                showToast('success', `已应用 "${templateName}" 模板`);
            }
        }
        
        // 获取模板数据
        function getTemplateData(templateName) {
            const templates = {
                '服务器监控': {
                    name: '服务器资源监控',
                    type: 'infrastructure',
                    priority: 'high',
                    description: '监控服务器CPU、内存、磁盘使用率'
                },
                '数据库监控': {
                    name: '数据库性能监控',
                    type: 'database',
                    priority: 'high',
                    description: '监控数据库连接数、查询性能、锁等待'
                },
                '应用监控': {
                    name: '应用服务监控',
                    type: 'application',
                    priority: 'medium',
                    description: '监控应用响应时间、错误率、吞吐量'
                },
                '业务监控': {
                    name: '业务指标监控',
                    type: 'business',
                    priority: 'high',
                    description: '监控业务关键指标和KPI'
                }
            };
            
            return templates[templateName];
        }
        
        // 应用筛选器
        function applyFilters() {
            showToast('success', '筛选器已应用');
        }
        
        // 重置筛选器
        function resetFilters() {
            document.querySelectorAll('.filter-chip').forEach(chip => {
                chip.classList.remove('active');
            });
            document.querySelector('.filter-chip[data-filter="all"]').classList.add('active');
            showToast('success', '筛选器已重置');
        }
        
        // 选择监控目标
        function selectTargets() {
            showToast('success', '目标选择功能正在开发中...');
        }
        
        // 表单验证
        function validateForm(form) {
            const requiredFields = form.querySelectorAll('[required]');
            let isValid = true;
            
            requiredFields.forEach(field => {
                if (!field.value.trim()) {
                    field.classList.add('is-invalid');
                    isValid = false;
                } else {
                    field.classList.remove('is-invalid');
                }
            });
            
            return isValid;
        }
        
        // 显示Toast通知
        function showToast(type, message) {
            const toastElement = document.getElementById(type + 'Toast');
            const toastBody = document.getElementById(type + 'ToastBody');
            
            toastBody.textContent = message;
            
            const toast = new bootstrap.Toast(toastElement);
            toast.show();
        }
        
        // 搜索规则
        function searchRules(searchTerm) {
            const ruleCards = document.querySelectorAll('.rule-card');
            
            ruleCards.forEach(card => {
                const title = card.querySelector('.rule-title').textContent.toLowerCase();
                const description = card.querySelector('.rule-description').textContent.toLowerCase();
                
                if (title.includes(searchTerm) || description.includes(searchTerm)) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }
        
        // 根据类型筛选规则
        function filterRulesByType(type) {
            const ruleCards = document.querySelectorAll('.rule-card');
            
            ruleCards.forEach(card => {
                if (type === 'all') {
                    card.style.display = 'block';
                } else {
                    const badges = card.querySelectorAll('.badge-type');
                    let hasType = false;
                    
                    badges.forEach(badge => {
                        if (badge.textContent.toLowerCase().includes(getTypeKeyword(type))) {
                            hasType = true;
                        }
                    });
                    
                    card.style.display = hasType ? 'block' : 'none';
                }
            });
        }
        
        // 获取类型关键词
        function getTypeKeyword(type) {
            const keywords = {
                'infrastructure': '基础设施',
                'network': '网络',
                'application': '应用',
                'middleware': '中间件',
                'database': '数据库',
                'business': '业务',
                'security': '安全'
            };
            return keywords[type] || '';
        }
        
        // 添加新规则到页面
        function addNewRuleToPage() {
            const form = document.getElementById('createRuleForm');
            const ruleName = document.getElementById('ruleName').value;
            const ruleType = document.getElementById('ruleType').value;
            const rulePriority = document.getElementById('rulePriority').value;
            const ruleDescription = document.getElementById('ruleDescription').value;
            
            // 创建新的规则卡片HTML
            const newRuleCard = createRuleCardHTML(ruleName, ruleType, rulePriority, ruleDescription);
            
            // 插入到规则列表的开头
            const rulesList = document.querySelector('.card-body');
            rulesList.insertAdjacentHTML('afterbegin', newRuleCard);
            
            // 重新绑定事件
            bindRuleCardEvents();
            
            // 清空表单
            form.reset();
        }
        
        // 创建规则卡片HTML
        function createRuleCardHTML(name, type, priority, description) {
            const typeIcons = {
                'infrastructure': 'fas fa-server',
                'network': 'fas fa-network-wired',
                'application': 'fas fa-code',
                'middleware': 'fas fa-cubes',
                'database': 'fas fa-database',
                'business': 'fas fa-briefcase',
                'security': 'fas fa-shield-alt'
            };
            
            const priorityClasses = {
                'high': 'badge-priority-high',
                'medium': 'badge-priority-medium',
                'low': 'badge-priority-low'
            };
            
            const priorityLabels = {
                'high': '高优先级',
                'medium': '中优先级',
                'low': '低优先级'
            };
            
            return `
                <div class="rule-card" data-rule-id="rule${Date.now()}">
                    <div class="rule-header">
                        <div class="rule-title">
                            <i class="${typeIcons[type]} me-2" style="color: var(--primary-color);"></i>
                            ${name}
                        </div>
                        <div class="rule-status">
                            <div class="status-indicator status-active"></div>
                            <span class="text-success">运行中</span>
                            <div class="form-check form-switch ms-3">
                                <input class="form-check-input" type="checkbox" checked>
                            </div>
                        </div>
                    </div>
                    <div class="rule-meta">
                        <span class="meta-badge ${priorityClasses[priority]}">${priorityLabels[priority]}</span>
                        <span class="meta-badge badge-type">${type}</span>
                        <span class="meta-badge badge-type">新建规则</span>
                    </div>
                    <div class="rule-description">
                        ${description}
                    </div>
                    <div class="rule-targets">
                        <i class="fas fa-crosshairs me-2"></i>
                        <strong>监控目标:</strong> 待配置 | 
                        <strong>最近触发:</strong> 未触发 | 
                        <strong>触发次数:</strong> 今日0次
                    </div>
                    <div class="rule-actions">
                        <button class="btn btn-primary btn-smart btn-sm" onclick="editRule(this)">
                            <i class="fas fa-edit me-1"></i> 编辑
                        </button>
                        <button class="btn btn-info btn-smart btn-sm" onclick="viewTrend(this)">
                            <i class="fas fa-chart-line me-1"></i> 查看趋势
                        </button>
                        <button class="btn btn-success btn-smart btn-sm" onclick="cloneRule(this)">
                            <i class="fas fa-copy me-1"></i> 克隆
                        </button>
                        <button class="btn btn-warning btn-smart btn-sm" onclick="toggleRule(this)">
                            <i class="fas fa-pause me-1"></i> 暂停
                        </button>
                        <button class="btn btn-danger btn-smart btn-sm" onclick="deleteRule(this)">
                            <i class="fas fa-trash me-1"></i> 删除
                        </button>
                    </div>
                </div>
            `;
        }
        
        // 绑定规则卡片事件
        function bindRuleCardEvents() {
            // 重新绑定悬停效果
            document.querySelectorAll('.rule-card').forEach(card => {
                card.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-2px)';
                });
                
                card.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0)';
                });
            });
            
            // 重新绑定开关事件
            document.querySelectorAll('.rule-card .form-check-input').forEach(toggle => {
                toggle.addEventListener('change', function() {
                    const ruleCard = this.closest('.rule-card');
                    const statusIndicator = ruleCard.querySelector('.status-indicator');
                    const statusText = ruleCard.querySelector('.rule-status span');
                    
                    if (this.checked) {
                        statusIndicator.classList.remove('status-inactive');
                        statusIndicator.classList.add('status-active');
                        statusText.textContent = '运行中';
                        statusText.className = 'text-success';
                        showToast('success', '规则已启用');
                    } else {
                        statusIndicator.classList.remove('status-active');
                        statusIndicator.classList.add('status-inactive');
                        statusText.textContent = '已暂停';
                        statusText.className = 'text-warning';
                        showToast('success', '规则已暂停');
                    }
                });
            });
        }
    </script>
</body>
</html> 