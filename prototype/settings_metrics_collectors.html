<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>智能监控系统 - 采集器配置</title>
    <link href="https://unpkg.com/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --sidebar-width: 250px;
            --topbar-height: 60px;
            --primary-color: #1e3c72;
            --secondary-color: #2a5298;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow-x: hidden;
            background-color: #f5f7fb;
        }
        
        .sidebar {
            width: var(--sidebar-width);
            background: linear-gradient(180deg, var(--primary-color), var(--secondary-color));
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            z-index: 1000;
            transition: all 0.3s;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
            color: white;
        }
        
        .main-content {
            margin-left: var(--sidebar-width);
            padding: 20px;
            min-height: 100vh;
            transition: all 0.3s;
        }
        
        .topbar {
            height: var(--topbar-height);
            background-color: white;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
            display: flex;
            align-items: center;
            padding: 0 20px;
            position: fixed;
            top: 0;
            right: 0;
            left: var(--sidebar-width);
            z-index: 999;
            transition: all 0.3s;
        }
        
        .content-area {
            margin-top: calc(var(--topbar-height) + 20px);
            padding-bottom: 20px;
        }
        
        .logo {
            padding: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 20px;
            font-weight: bold;
            height: var(--topbar-height);
            display: flex;
            align-items: center;
        }
        
        .menu-item {
            padding: 15px 20px;
            display: flex;
            align-items: center;
            color: rgba(255, 255, 255, 0.9);
            text-decoration: none;
            transition: all 0.3s;
            border-left: 4px solid transparent;
        }
        
        .menu-item:hover, .menu-item.active {
            background-color: rgba(255, 255, 255, 0.1);
            color: white;
            border-left: 4px solid white;
        }
        
        .menu-item i {
            margin-right: 10px;
            width: 20px;
            text-align: center;
        }
        
        .card {
            border: none;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            margin-bottom: 20px;
        }
        
        .card-header {
            background-color: white;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
            padding: 15px 20px;
            font-weight: 600;
        }
        
        .collector-card {
            border: 1px solid #f0f0f0;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            transition: all 0.3s;
        }
        
        .collector-card:hover {
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            border-color: var(--primary-color);
            cursor: pointer;
        }
        
        .collector-card.active {
            border-color: var(--primary-color);
            background-color: rgba(30, 60, 114, 0.05);
        }
        
        .protocol-settings {
            display: none;
        }
        
        .protocol-settings.active {
            display: block;
        }
    </style>
</head>
<body>
    <!-- 侧边导航栏 -->
    <div class="sidebar">
        <div class="logo">
            <i class="fas fa-shield-alt me-2"></i> SkyEye 智能监控
        </div>
        <div class="menu-items mt-4">
            <a href="dashboard.html" class="menu-item">
                <i class="fas fa-tachometer-alt"></i> 控制台
            </a>
            <a href="monitoring.html" class="menu-item">
                <i class="fas fa-video"></i> 监控管理
            </a>
            <a href="alerts.html" class="menu-item">
                <i class="fas fa-bell"></i> 报警中心
            </a>
            <a href="analytics.html" class="menu-item">
                <i class="fas fa-chart-line"></i> 数据分析
            </a>
            <a href="devices.html" class="menu-item">
                <i class="fas fa-cog"></i> 设备管理
            </a>
            <a href="users.html" class="menu-item">
                <i class="fas fa-user-shield"></i> 用户管理
            </a>
            <a href="history.html" class="menu-item">
                <i class="fas fa-history"></i> 历史记录
            </a>
            <a href="settings.html" class="menu-item active">
                <i class="fas fa-sliders-h"></i> 系统设置
            </a>
        </div>
    </div>

    <!-- 顶部导航栏 -->
    <div class="topbar">
        <button type="button" class="btn btn-sm d-md-none" id="sidebarCollapse">
            <i class="fas fa-bars"></i>
        </button>
        
        <div class="d-flex align-items-center ms-auto">
            <div class="input-group search-box">
                <input type="text" class="form-control form-control-sm" placeholder="搜索...">
                <button class="btn btn-sm btn-outline-secondary" type="button">
                    <i class="fas fa-search"></i>
                </button>
            </div>
            
            <button type="button" class="btn btn-sm position-relative ms-2">
                <i class="far fa-bell"></i>
                <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                    5
                </span>
            </button>
            
            <div class="dropdown ms-3">
                <a class="dropdown-toggle d-flex align-items-center text-decoration-none" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    <div class="rounded-circle bg-light d-flex align-items-center justify-content-center" style="width: 32px; height: 32px;">
                        <i class="fas fa-user text-secondary"></i>
                    </div>
                    <div class="ms-2 d-none d-sm-block">
                        <div class="small fw-bold">管理员</div>
                        <div class="small text-muted">系统管理员</div>
                    </div>
                </a>
                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                    <li><a class="dropdown-item" href="#"><i class="fas fa-user-circle me-2"></i> 个人信息</a></li>
                    <li><a class="dropdown-item" href="#"><i class="fas fa-cog me-2"></i> 账号设置</a></li>
                    <li><hr class="dropdown-divider"></li>
                    <li><a class="dropdown-item" href="#"><i class="fas fa-sign-out-alt me-2"></i> 退出登录</a></li>
                </ul>
            </div>
        </div>
    </div>

    <!-- 主内容区 -->
    <div class="main-content">
        <div class="content-area">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <div>
                    <h4>指标配置</h4>
                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb mb-0">
                            <li class="breadcrumb-item"><a href="settings.html">系统设置</a></li>
                            <li class="breadcrumb-item"><a href="settings_metrics.html">指标配置</a></li>
                            <li class="breadcrumb-item active" aria-current="page">采集器配置</li>
                        </ol>
                    </nav>
                </div>
                <div>
                    <button class="btn btn-primary btn-sm">
                        <i class="fas fa-save me-1"></i> 保存配置
                    </button>
                </div>
            </div>
            
            <!-- 指标配置页面导航标签 -->
            <ul class="nav nav-tabs mb-4">
                <li class="nav-item">
                    <a class="nav-link" href="settings_metrics.html" id="metrics-tab">指标管理</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="settings_metrics_templates.html" id="templates-tab">指标模板</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link active" href="settings_metrics_collectors.html" id="collectors-tab">采集器配置</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="settings_metrics_history.html" id="history-tab">采集历史</a>
                </li>
            </ul>

            <!-- 采集器配置主体 -->
            <div class="row">
                <div class="col-md-4">
                    <!-- 采集器列表卡片 -->
                    <div class="card mb-4">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <span><i class="fas fa-signal me-2"></i> 采集器列表</span>
                            <div>
                                <button class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#addCollectorModal">
                                    <i class="fas fa-plus me-1"></i> 添加采集器
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="input-group mb-3">
                                <input type="text" class="form-control form-control-sm" placeholder="搜索采集器...">
                                <button class="btn btn-sm btn-outline-secondary" type="button">
                                    <i class="fas fa-search"></i>
                                </button>
                            </div>
                            
                            <!-- 采集器列表 -->
                            <div class="collector-list">
                                <div class="collector-card active" onclick="showCollectorDetail('snmp-server')">
                                    <div class="d-flex justify-content-between align-items-center mb-2">
                                        <h6 class="mb-0">服务器SNMP采集器</h6>
                                        <span class="badge bg-success">在线</span>
                                    </div>
                                    <div class="small text-muted mb-2">用于采集主服务器群组的基础性能指标</div>
                                    <div class="d-flex justify-content-between align-items-center">
                                        <span class="badge bg-primary">SNMP</span>
                                        <small class="text-muted">上次采集: 5分钟前</small>
                                    </div>
                                </div>
                                
                                <div class="collector-card" onclick="showCollectorDetail('http-middleware')">
                                    <div class="d-flex justify-content-between align-items-center mb-2">
                                        <h6 class="mb-0">中间件API采集器</h6>
                                        <span class="badge bg-success">在线</span>
                                    </div>
                                    <div class="small text-muted mb-2">负责采集Nginx、Tomcat等中间件指标</div>
                                    <div class="d-flex justify-content-between align-items-center">
                                        <span class="badge bg-primary">HTTP API</span>
                                        <small class="text-muted">上次采集: 3分钟前</small>
                                    </div>
                                </div>
                                
                                <div class="collector-card" onclick="showCollectorDetail('jmx-java')">
                                    <div class="d-flex justify-content-between align-items-center mb-2">
                                        <h6 class="mb-0">Java应用JMX采集器</h6>
                                        <span class="badge bg-warning">部分在线</span>
                                    </div>
                                    <div class="small text-muted mb-2">采集Java应用的JVM和性能指标</div>
                                    <div class="d-flex justify-content-between align-items-center">
                                        <span class="badge bg-primary">JMX</span>
                                        <small class="text-muted">上次采集: 8分钟前</small>
                                    </div>
                                </div>
                                
                                <div class="collector-card" onclick="showCollectorDetail('cmd-windows')">
                                    <div class="d-flex justify-content-between align-items-center mb-2">
                                        <h6 class="mb-0">Windows命令行采集器</h6>
                                        <span class="badge bg-success">在线</span>
                                    </div>
                                    <div class="small text-muted mb-2">通过PowerShell脚本采集Windows特定指标</div>
                                    <div class="d-flex justify-content-between align-items-center">
                                        <span class="badge bg-primary">命令行</span>
                                        <small class="text-muted">上次采集: 10分钟前</small>
                                    </div>
                                </div>
                                
                                <div class="collector-card" onclick="showCollectorDetail('db-monitor')">
                                    <div class="d-flex justify-content-between align-items-center mb-2">
                                        <h6 class="mb-0">数据库监控采集器</h6>
                                        <span class="badge bg-danger">离线</span>
                                    </div>
                                    <div class="small text-muted mb-2">采集MySQL、PostgreSQL等数据库性能指标</div>
                                    <div class="d-flex justify-content-between align-items-center">
                                        <span class="badge bg-primary">SQL查询</span>
                                        <small class="text-muted">上次采集: 2小时前</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-8">
                    <!-- 采集器详情卡片 -->
                    <div class="card mb-4">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <span><i class="fas fa-info-circle me-2"></i> 采集器详情</span>
                            <div>
                                <button class="btn btn-sm btn-outline-secondary me-2" id="testCollectorBtn">
                                    <i class="fas fa-vial me-1"></i> 测试连接
                                </button>
                                <button class="btn btn-sm btn-primary" id="saveCollectorBtn">
                                    <i class="fas fa-save me-1"></i> 保存配置
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div id="collectorDetail">
                                <!-- 采集器详情内容 - 服务器SNMP采集器 -->
                                <div id="snmp-server-detail">
                                    <h5 class="mb-3">服务器SNMP采集器</h5>
                                    
                                    <!-- 基本信息 -->
                                    <div class="mb-4">
                                        <h6 class="border-bottom pb-2 mb-3">基本信息</h6>
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label for="collectorName" class="form-label">采集器名称 <span class="text-danger">*</span></label>
                                                    <input type="text" class="form-control" id="collectorName" value="服务器SNMP采集器">
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label for="collectorType" class="form-label">采集类型 <span class="text-danger">*</span></label>
                                                    <select class="form-select" id="collectorType" onchange="showProtocolSettings()">
                                                        <option value="SNMP" selected>SNMP</option>
                                                        <option value="HTTP">HTTP API</option>
                                                        <option value="JMX">JMX</option>
                                                        <option value="CMD">命令行</option>
                                                        <option value="SQL">SQL查询</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label for="collectorInterval" class="form-label">采集间隔(秒) <span class="text-danger">*</span></label>
                                                    <input type="number" class="form-control" id="collectorInterval" value="300">
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label for="timeoutSetting" class="form-label">超时设置(秒)</label>
                                                    <input type="number" class="form-control" id="timeoutSetting" value="30">
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label for="retryCount" class="form-label">重试次数</label>
                                                    <input type="number" class="form-control" id="retryCount" value="3">
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label for="collectorStatus" class="form-label">采集器状态</label>
                                                    <select class="form-select" id="collectorStatus">
                                                        <option value="enabled" selected>启用</option>
                                                        <option value="disabled">禁用</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label for="collectorDesc" class="form-label">描述</label>
                                            <textarea class="form-control" id="collectorDesc" rows="2">用于采集主服务器群组的基础性能指标，包括CPU、内存、磁盘和网络等数据。</textarea>
                                        </div>
                                    </div>
                                    
                                    <!-- SNMP协议配置 -->
                                    <div class="protocol-settings active" id="snmpSettings">
                                        <h6 class="border-bottom pb-2 mb-3">SNMP协议配置</h6>
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label for="snmpVersion" class="form-label">SNMP版本 <span class="text-danger">*</span></label>
                                                    <select class="form-select" id="snmpVersion">
                                                        <option value="1">SNMP v1</option>
                                                        <option value="2c" selected>SNMP v2c</option>
                                                        <option value="3">SNMP v3</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label for="snmpCommunity" class="form-label">团体名 <span class="text-danger">*</span></label>
                                                    <input type="text" class="form-control" id="snmpCommunity" value="public">
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label for="snmpPort" class="form-label">端口</label>
                                                    <input type="number" class="form-control" id="snmpPort" value="161">
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label for="snmpRetries" class="form-label">重试次数</label>
                                                    <input type="number" class="form-control" id="snmpRetries" value="2">
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- SNMP v3专用设置 -->
                                        <div id="snmpV3Settings" style="display: none;">
                                            <h6 class="mt-3 mb-3">SNMP v3 安全设置</h6>
                                            <div class="row mb-3">
                                                <div class="col-md-6">
                                                    <div class="mb-3">
                                                        <label for="snmpUsername" class="form-label">用户名 <span class="text-danger">*</span></label>
                                                        <input type="text" class="form-control" id="snmpUsername">
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="mb-3">
                                                        <label for="snmpAuthProtocol" class="form-label">认证协议</label>
                                                        <select class="form-select" id="snmpAuthProtocol">
                                                            <option value="MD5">MD5</option>
                                                            <option value="SHA">SHA</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row mb-3">
                                                <div class="col-md-6">
                                                    <div class="mb-3">
                                                        <label for="snmpAuthPassword" class="form-label">认证密码</label>
                                                        <input type="password" class="form-control" id="snmpAuthPassword">
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="mb-3">
                                                        <label for="snmpPrivProtocol" class="form-label">加密协议</label>
                                                        <select class="form-select" id="snmpPrivProtocol">
                                                            <option value="DES">DES</option>
                                                            <option value="AES">AES</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row mb-3">
                                                <div class="col-md-6">
                                                    <div class="mb-3">
                                                        <label for="snmpPrivPassword" class="form-label">加密密码</label>
                                                        <input type="password" class="form-control" id="snmpPrivPassword">
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="mb-3">
                                                        <label for="snmpContextName" class="form-label">上下文名称</label>
                                                        <input type="text" class="form-control" id="snmpContextName">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- OID配置部分 -->
                                        <h6 class="mt-4 mb-3">OID配置</h6>
                                        <div class="alert alert-info mb-3">
                                            <i class="fas fa-info-circle me-2"></i>
                                            为需要监控的每个指标配置对应的SNMP OID。系统将使用这些OID从SNMP设备获取数据。
                                        </div>
                                        
                                        <div class="table-responsive mb-3">
                                            <table class="table table-sm table-hover">
                                                <thead class="table-light">
                                                    <tr>
                                                        <th width="25%">指标名称</th>
                                                        <th width="30%">OID</th>
                                                        <th width="15%">数据类型</th>
                                                        <th width="20%">单位</th>
                                                        <th width="10%">操作</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td>CPU使用率</td>
                                                        <td>1.3.6.1.4.1.2021.11.9.0</td>
                                                        <td>Integer</td>
                                                        <td>%</td>
                                                        <td>
                                                            <button class="btn btn-sm btn-link p-0 text-primary me-2"><i class="fas fa-edit"></i></button>
                                                            <button class="btn btn-sm btn-link p-0 text-danger"><i class="fas fa-trash"></i></button>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>内存使用率</td>
                                                        <td>1.3.6.1.4.1.2021.4.11.0</td>
                                                        <td>Integer</td>
                                                        <td>%</td>
                                                        <td>
                                                            <button class="btn btn-sm btn-link p-0 text-primary me-2"><i class="fas fa-edit"></i></button>
                                                            <button class="btn btn-sm btn-link p-0 text-danger"><i class="fas fa-trash"></i></button>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>磁盘使用率</td>
                                                        <td>1.3.6.1.4.1.2021.9.1.9.1</td>
                                                        <td>Integer</td>
                                                        <td>%</td>
                                                        <td>
                                                            <button class="btn btn-sm btn-link p-0 text-primary me-2"><i class="fas fa-edit"></i></button>
                                                            <button class="btn btn-sm btn-link p-0 text-danger"><i class="fas fa-trash"></i></button>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>网络流入带宽</td>
                                                        <td>1.3.6.1.2.1.31.1.1.1.6.1</td>
                                                        <td>Counter64</td>
                                                        <td>bytes/s</td>
                                                        <td>
                                                            <button class="btn btn-sm btn-link p-0 text-primary me-2"><i class="fas fa-edit"></i></button>
                                                            <button class="btn btn-sm btn-link p-0 text-danger"><i class="fas fa-trash"></i></button>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>网络流出带宽</td>
                                                        <td>1.3.6.1.2.1.31.1.1.1.10.1</td>
                                                        <td>Counter64</td>
                                                        <td>bytes/s</td>
                                                        <td>
                                                            <button class="btn btn-sm btn-link p-0 text-primary me-2"><i class="fas fa-edit"></i></button>
                                                            <button class="btn btn-sm btn-link p-0 text-danger"><i class="fas fa-trash"></i></button>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                        
                                        <div class="text-end">
                                            <button class="btn btn-sm btn-outline-primary">
                                                <i class="fas fa-plus me-1"></i> 添加OID配置
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <!-- HTTP API协议配置 -->
                                    <div class="protocol-settings" id="httpSettings">
                                        <h6 class="border-bottom pb-2 mb-3">HTTP API配置</h6>
                                        
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label for="httpBaseUrl" class="form-label">基础URL <span class="text-danger">*</span></label>
                                                    <input type="text" class="form-control" id="httpBaseUrl" value="http://192.168.1.100:8080/api">
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label for="httpMethod" class="form-label">请求方法</label>
                                                    <select class="form-select" id="httpMethod">
                                                        <option value="GET" selected>GET</option>
                                                        <option value="POST">POST</option>
                                                        <option value="PUT">PUT</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label for="httpAuth" class="form-label">认证方式</label>
                                                    <select class="form-select" id="httpAuth">
                                                        <option value="none" selected>无认证</option>
                                                        <option value="basic">Basic认证</option>
                                                        <option value="token">Token认证</option>
                                                        <option value="oauth">OAuth认证</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label for="httpContentType" class="form-label">内容类型</label>
                                                    <select class="form-select" id="httpContentType">
                                                        <option value="application/json" selected>application/json</option>
                                                        <option value="application/xml">application/xml</option>
                                                        <option value="text/plain">text/plain</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div id="httpAuthSettings" class="mb-3" style="display: none;">
                                            <h6 class="mt-3 mb-3">认证设置</h6>
                                            <div class="row mb-3">
                                                <div class="col-md-6">
                                                    <div class="mb-3">
                                                        <label for="httpUsername" class="form-label">用户名</label>
                                                        <input type="text" class="form-control" id="httpUsername">
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="mb-3">
                                                        <label for="httpPassword" class="form-label">密码</label>
                                                        <input type="password" class="form-control" id="httpPassword">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row mb-3">
                                                <div class="col-md-12">
                                                    <div class="mb-3">
                                                        <label for="httpToken" class="form-label">Token</label>
                                                        <input type="text" class="form-control" id="httpToken">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <h6 class="mt-4 mb-3">请求头设置</h6>
                                        <div class="table-responsive mb-3">
                                            <table class="table table-sm table-hover">
                                                <thead class="table-light">
                                                    <tr>
                                                        <th width="40%">名称</th>
                                                        <th width="50%">值</th>
                                                        <th width="10%">操作</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td>Accept</td>
                                                        <td>application/json</td>
                                                        <td>
                                                            <button class="btn btn-sm btn-link p-0 text-danger"><i class="fas fa-trash"></i></button>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>X-API-Key</td>
                                                        <td>a1b2c3d4e5f6</td>
                                                        <td>
                                                            <button class="btn btn-sm btn-link p-0 text-danger"><i class="fas fa-trash"></i></button>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                        
                                        <div class="mb-4">
                                            <div class="row">
                                                <div class="col-md-5">
                                                    <input type="text" class="form-control form-control-sm" placeholder="请求头名称">
                                                </div>
                                                <div class="col-md-5">
                                                    <input type="text" class="form-control form-control-sm" placeholder="请求头值">
                                                </div>
                                                <div class="col-md-2">
                                                    <button class="btn btn-sm btn-outline-primary w-100">添加</button>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <h6 class="mt-4 mb-3">接口配置</h6>
                                        <div class="alert alert-info mb-3">
                                            <i class="fas fa-info-circle me-2"></i>
                                            配置用于采集不同指标的API接口路径和数据解析规则。
                                        </div>
                                        
                                        <div class="table-responsive mb-3">
                                            <table class="table table-sm table-hover">
                                                <thead class="table-light">
                                                    <tr>
                                                        <th width="20%">指标名称</th>
                                                        <th width="30%">API路径</th>
                                                        <th width="20%">解析表达式</th>
                                                        <th width="20%">数据类型</th>
                                                        <th width="10%">操作</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td>HTTP请求数</td>
                                                        <td>/metrics/http/requests</td>
                                                        <td>$.requests.total</td>
                                                        <td>Number</td>
                                                        <td>
                                                            <button class="btn btn-sm btn-link p-0 text-primary me-2"><i class="fas fa-edit"></i></button>
                                                            <button class="btn btn-sm btn-link p-0 text-danger"><i class="fas fa-trash"></i></button>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>响应时间</td>
                                                        <td>/metrics/http/performance</td>
                                                        <td>$.response.avgTime</td>
                                                        <td>Number</td>
                                                        <td>
                                                            <button class="btn btn-sm btn-link p-0 text-primary me-2"><i class="fas fa-edit"></i></button>
                                                            <button class="btn btn-sm btn-link p-0 text-danger"><i class="fas fa-trash"></i></button>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                        
                                        <div class="text-end">
                                            <button class="btn btn-sm btn-outline-primary">
                                                <i class="fas fa-plus me-1"></i> 添加接口
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <!-- JMX协议配置 -->
                                    <div class="protocol-settings" id="jmxSettings">
                                        <h6 class="border-bottom pb-2 mb-3">JMX协议配置</h6>
                                        
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label for="jmxHost" class="form-label">主机地址 <span class="text-danger">*</span></label>
                                                    <input type="text" class="form-control" id="jmxHost" value="192.168.1.200">
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label for="jmxPort" class="form-label">端口 <span class="text-danger">*</span></label>
                                                    <input type="number" class="form-control" id="jmxPort" value="9999">
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label for="jmxUsername" class="form-label">用户名</label>
                                                    <input type="text" class="form-control" id="jmxUsername" value="jmxadmin">
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label for="jmxPassword" class="form-label">密码</label>
                                                    <input type="password" class="form-control" id="jmxPassword" value="********">
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="row mb-3">
                                            <div class="col-md-12">
                                                <div class="mb-3">
                                                    <label for="jmxUrl" class="form-label">JMX服务URL</label>
                                                    <input type="text" class="form-control" id="jmxUrl" value="service:jmx:rmi:///jndi/rmi://192.168.1.200:9999/jmxrmi">
                                                    <small class="form-text text-muted">留空将根据主机地址和端口自动生成</small>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label for="jmxSSL" class="form-label">SSL连接</label>
                                                    <select class="form-select" id="jmxSSL">
                                                        <option value="false" selected>否</option>
                                                        <option value="true">是</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label for="jmxConnectionTimeout" class="form-label">连接超时(秒)</label>
                                                    <input type="number" class="form-control" id="jmxConnectionTimeout" value="30">
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <h6 class="mt-4 mb-3">MBean配置</h6>
                                        <div class="alert alert-info mb-3">
                                            <i class="fas fa-info-circle me-2"></i>
                                            配置需要采集的MBean对象和属性。系统将从Java应用中获取对应的JMX数据。
                                        </div>
                                        
                                        <div class="table-responsive mb-3">
                                            <table class="table table-sm table-hover">
                                                <thead class="table-light">
                                                    <tr>
                                                        <th width="20%">指标名称</th>
                                                        <th width="35%">MBean名称</th>
                                                        <th width="25%">属性路径</th>
                                                        <th width="10%">数据类型</th>
                                                        <th width="10%">操作</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td>堆内存使用率</td>
                                                        <td>java.lang:type=Memory</td>
                                                        <td>HeapMemoryUsage.used</td>
                                                        <td>Long</td>
                                                        <td>
                                                            <button class="btn btn-sm btn-link p-0 text-primary me-2"><i class="fas fa-edit"></i></button>
                                                            <button class="btn btn-sm btn-link p-0 text-danger"><i class="fas fa-trash"></i></button>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>线程数量</td>
                                                        <td>java.lang:type=Threading</td>
                                                        <td>ThreadCount</td>
                                                        <td>Integer</td>
                                                        <td>
                                                            <button class="btn btn-sm btn-link p-0 text-primary me-2"><i class="fas fa-edit"></i></button>
                                                            <button class="btn btn-sm btn-link p-0 text-danger"><i class="fas fa-trash"></i></button>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>GC总次数</td>
                                                        <td>java.lang:type=GarbageCollector,name=*</td>
                                                        <td>CollectionCount</td>
                                                        <td>Long</td>
                                                        <td>
                                                            <button class="btn btn-sm btn-link p-0 text-primary me-2"><i class="fas fa-edit"></i></button>
                                                            <button class="btn btn-sm btn-link p-0 text-danger"><i class="fas fa-trash"></i></button>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                        
                                        <div class="text-end">
                                            <button class="btn btn-sm btn-outline-primary">
                                                <i class="fas fa-plus me-1"></i> 添加MBean
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <!-- 命令行配置 -->
                                    <div class="protocol-settings" id="cmdSettings">
                                        <h6 class="border-bottom pb-2 mb-3">命令行配置</h6>
                                        
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label for="cmdHost" class="form-label">目标主机 <span class="text-danger">*</span></label>
                                                    <input type="text" class="form-control" id="cmdHost" value="192.168.1.50">
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label for="cmdProtocol" class="form-label">连接协议</label>
                                                    <select class="form-select" id="cmdProtocol">
                                                        <option value="SSH" selected>SSH</option>
                                                        <option value="WinRM">WinRM</option>
                                                        <option value="Local">本地执行</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label for="cmdUsername" class="form-label">用户名 <span class="text-danger">*</span></label>
                                                    <input type="text" class="form-control" id="cmdUsername" value="admin">
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label for="cmdAuthType" class="form-label">认证方式</label>
                                                    <select class="form-select" id="cmdAuthType">
                                                        <option value="password" selected>密码</option>
                                                        <option value="key">密钥</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div id="cmdPasswordAuth" class="row mb-3">
                                            <div class="col-md-12">
                                                <div class="mb-3">
                                                    <label for="cmdPassword" class="form-label">密码 <span class="text-danger">*</span></label>
                                                    <input type="password" class="form-control" id="cmdPassword" value="********">
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div id="cmdKeyAuth" class="row mb-3" style="display: none;">
                                            <div class="col-md-12">
                                                <div class="mb-3">
                                                    <label for="cmdPrivateKey" class="form-label">私钥文件路径 <span class="text-danger">*</span></label>
                                                    <input type="text" class="form-control" id="cmdPrivateKey">
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label for="cmdPort" class="form-label">端口</label>
                                                    <input type="number" class="form-control" id="cmdPort" value="22">
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label for="cmdTimeout" class="form-label">超时(秒)</label>
                                                    <input type="number" class="form-control" id="cmdTimeout" value="60">
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <h6 class="mt-4 mb-3">命令配置</h6>
                                        <div class="alert alert-info mb-3">
                                            <i class="fas fa-info-circle me-2"></i>
                                            配置用于采集指标的命令和结果解析规则。确保命令具有适当的执行权限。
                                        </div>
                                        
                                        <div class="table-responsive mb-3">
                                            <table class="table table-sm table-hover">
                                                <thead class="table-light">
                                                    <tr>
                                                        <th width="15%">指标名称</th>
                                                        <th width="35%">命令</th>
                                                        <th width="30%">结果解析规则</th>
                                                        <th width="10%">数据类型</th>
                                                        <th width="10%">操作</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td>磁盘状态</td>
                                                        <td>Get-PSDrive C | Select-Object Used,Free</td>
                                                        <td>$_.Used</td>
                                                        <td>Long</td>
                                                        <td>
                                                            <button class="btn btn-sm btn-link p-0 text-primary me-2"><i class="fas fa-edit"></i></button>
                                                            <button class="btn btn-sm btn-link p-0 text-danger"><i class="fas fa-trash"></i></button>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>进程数</td>
                                                        <td>Get-Process | Measure-Object | Select-Object Count</td>
                                                        <td>$_.Count</td>
                                                        <td>Integer</td>
                                                        <td>
                                                            <button class="btn btn-sm btn-link p-0 text-primary me-2"><i class="fas fa-edit"></i></button>
                                                            <button class="btn btn-sm btn-link p-0 text-danger"><i class="fas fa-trash"></i></button>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>服务状态</td>
                                                        <td>Get-Service "MSSQLSERVER" | Select-Object Status</td>
                                                        <td>$_.Status -eq "Running"</td>
                                                        <td>Boolean</td>
                                                        <td>
                                                            <button class="btn btn-sm btn-link p-0 text-primary me-2"><i class="fas fa-edit"></i></button>
                                                            <button class="btn btn-sm btn-link p-0 text-danger"><i class="fas fa-trash"></i></button>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                        
                                        <div class="text-end">
                                            <button class="btn btn-sm btn-outline-primary">
                                                <i class="fas fa-plus me-1"></i> 添加命令
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 添加采集器模态框 -->
    <div class="modal fade" id="addCollectorModal" tabindex="-1" aria-labelledby="addCollectorModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addCollectorModalLabel">添加新采集器</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="关闭"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="newCollectorName" class="form-label">采集器名称 <span class="text-danger">*</span></label>
                        <input type="text" class="form-control" id="newCollectorName" placeholder="输入采集器名称">
                    </div>
                    
                    <div class="mb-3">
                        <label for="newCollectorType" class="form-label">采集类型 <span class="text-danger">*</span></label>
                        <select class="form-select" id="newCollectorType">
                            <option value="SNMP" selected>SNMP</option>
                            <option value="HTTP">HTTP API</option>
                            <option value="JMX">JMX</option>
                            <option value="CMD">命令行</option>
                            <option value="SQL">SQL查询</option>
                        </select>
                    </div>
                    
                    <div class="mb-3">
                        <label for="newCollectorDesc" class="form-label">描述</label>
                        <textarea class="form-control" id="newCollectorDesc" rows="3" placeholder="描述该采集器的用途..."></textarea>
                    </div>
                    
                    <div class="alert alert-info">
                        <i class="fas fa-info-circle me-2"></i>
                        创建采集器后，您可以在采集器详情页面中配置详细的协议参数和指标关联。
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                    <button type="button" class="btn btn-primary">创建采集器</button>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://unpkg.com/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
        <script>        // 显示采集器详情        function showCollectorDetail(collectorId) {            // 处理采集器卡片的激活状态            document.querySelectorAll('.collector-card').forEach(card => {                card.classList.remove('active');            });            event.currentTarget.classList.add('active');                        // 实际应用中，应该根据collectorId动态加载不同采集器的详情            console.log('显示采集器详情: ' + collectorId);        }                // 显示对应的协议设置        function showProtocolSettings() {            const collectorType = document.getElementById('collectorType').value;                        // 隐藏所有协议设置            document.querySelectorAll('.protocol-settings').forEach(settings => {                settings.classList.remove('active');            });                        // 显示对应的协议设置            const settingsId = collectorType.toLowerCase() + 'Settings';            const settingsElement = document.getElementById(settingsId);            if (settingsElement) {                settingsElement.classList.add('active');            }        }                // 切换SNMP版本相关设置        function toggleSnmpV3Settings() {            const snmpVersion = document.getElementById('snmpVersion').value;            const snmpV3Settings = document.getElementById('snmpV3Settings');            const communityField = document.getElementById('snmpCommunity').closest('.mb-3');                        if (snmpVersion === '3') {                snmpV3Settings.style.display = 'block';                communityField.style.display = 'none';            } else {                snmpV3Settings.style.display = 'none';                communityField.style.display = 'block';            }        }                // 切换HTTP认证相关设置        function toggleHttpAuthSettings() {            const httpAuth = document.getElementById('httpAuth').value;            const httpAuthSettings = document.getElementById('httpAuthSettings');            const httpUsernameField = document.getElementById('httpUsername').closest('.mb-3');            const httpPasswordField = document.getElementById('httpPassword').closest('.mb-3');            const httpTokenField = document.getElementById('httpToken').closest('.mb-3');                        if (httpAuth === 'none') {                httpAuthSettings.style.display = 'none';            } else {                httpAuthSettings.style.display = 'block';                                // 根据认证方式显示不同字段                if (httpAuth === 'basic') {                    httpUsernameField.style.display = 'block';                    httpPasswordField.style.display = 'block';                    httpTokenField.style.display = 'none';                } else if (httpAuth === 'token') {                    httpUsernameField.style.display = 'none';                    httpPasswordField.style.display = 'none';                    httpTokenField.style.display = 'block';                } else if (httpAuth === 'oauth') {                    httpUsernameField.style.display = 'block';                    httpPasswordField.style.display = 'block';                    httpTokenField.style.display = 'block';                }            }        }                // 切换命令行认证相关设置        function toggleCmdAuthSettings() {            const cmdAuthType = document.getElementById('cmdAuthType').value;            const cmdPasswordAuth = document.getElementById('cmdPasswordAuth');            const cmdKeyAuth = document.getElementById('cmdKeyAuth');                        if (cmdAuthType === 'password') {                cmdPasswordAuth.style.display = 'flex';                cmdKeyAuth.style.display = 'none';            } else if (cmdAuthType === 'key') {                cmdPasswordAuth.style.display = 'none';                cmdKeyAuth.style.display = 'flex';            }        }                // 初始化页面        document.addEventListener('DOMContentLoaded', function() {            // 为测试连接按钮添加事件            document.getElementById('testCollectorBtn').addEventListener('click', function() {                alert('测试连接功能将在实际开发中实现');            });                        // 为保存配置按钮添加事件            document.getElementById('saveCollectorBtn').addEventListener('click', function() {                alert('保存配置功能将在实际开发中实现');            });                        // 为SNMP版本选择添加事件            if (document.getElementById('snmpVersion')) {                document.getElementById('snmpVersion').addEventListener('change', toggleSnmpV3Settings);                // 初始化                toggleSnmpV3Settings();            }                        // 为HTTP认证方式选择添加事件            if (document.getElementById('httpAuth')) {                document.getElementById('httpAuth').addEventListener('change', toggleHttpAuthSettings);                // 初始化                toggleHttpAuthSettings();            }                        // 为命令行认证方式选择添加事件            if (document.getElementById('cmdAuthType')) {                document.getElementById('cmdAuthType').addEventListener('change', toggleCmdAuthSettings);                // 初始化                toggleCmdAuthSettings();            }        });
    </script>
</body>
</html> 